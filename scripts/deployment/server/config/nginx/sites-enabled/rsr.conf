pid     /tmp/rsr_nginx.pid;
user    www-data;

events {
    worker_connections  256;
}

http {
    upstream rsr_django {
        server  unix:///tmp/rsr_uwsgi.socket;
    }

    include     /etc/nginx/mime.types;

    server {
        listen          80;
        server_name     $hostname;
        charset         utf-8;
        access_log      /var/akvo/logs/nginx/access.log;
        error_log       /var/akvo/logs/nginx/error.log;
        root            /var/akvo/www;

        location        /rsr/media {
            alias       /var/akvo/repo/current/akvo/mediaroot;
        }

        location =      /favicon.ico {
            alias       /var/akvo/repo/current/akvo/mediaroot/akvo/img/favicon.ico;
        }

        location        / {
            include     /etc/nginx/uwsgi_params;
            uwsgi_pass  rsr_django;
        }
    }
}
